{% extends "base.html" %}

{% block title %}{{ resort.name }} - SkiStats{% endblock %}

{% block content %}
<style>

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background: white;
        color: #333;
        line-height: 1.6;
    }
        
    h1 {
        font-size: 2.5rem;
        font-family: 'Inter', sans-serif;
        font-weight: 300;
        color: #1a1a1a;
        margin-bottom: 0rem;
        text-align: center;
        letter-spacing: -0.025em;
    }
    
    h2 {
        font-size: 1.75rem;
        font-weight: 300;
        color: #1a1a1a;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
        
        padding-bottom: 0.5rem;
    }
    
    p {
        font-size: 1.1rem;
        line-height: 1.7;
        color: #555;
        margin-bottom: 1.5rem;
    }

    .resort-hero {
        position: relative; 
        width: 100vw;
        margin-left: calc(-50vw + 50%);
    }

    .resort-hero img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        display: block;
    }

    /* Dark translucent tint */
    .resort-hero::after {
        content: "";
        position: absolute;
        inset: 0;
        background: rgba(10, 15, 30, 0.55);
        z-index: 1;
    }


    /* Overlay container */
    .resort-overlay {
        position: absolute;
        top: 28%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 2;
        color: #fff;
        width: 80vw;
    }




    /* Resort title text */
    .resort-overlay h1 {
        font-size: 4rem;
        font-family: 'Plus Jakarta Sans', sans-serif;
        color: white;
        margin-bottom: 0rem;
        margin-top: 0rem;
        text-align: center;
        letter-spacing: 0.02em;
    }

    /* State text below title */
    .resort-overlay .state {
        font-size: 1.6rem;
        color: white;
        text-align: center;
        margin-bottom: 0rem;
        font-weight: 100;
        letter-spacing: 0.02em;
        margin-block-start: 0.5rem;
        font-family: 'Plus Jakarta Sans', sans-serif;
    }

    /* Dynamic text colors */
    .light-text {
        color: white;
        text-shadow: 0 1px 4px rgba(0,0,0,0.4);
    }

    .dark-text {
        color: black;
        text-shadow: 0 1px 4px rgba(255,255,255,0.3);
    }
    
    .state {
        font-size: 1.6rem;
        color: #444;
        text-align: center;
        margin-bottom: 0.5rem;
        font-weight: 300;
        margin-block-start: 0.5rem;
    }
    
    .notes-header {
        font-weight: 600;
        color: #444;
        margin-bottom: 1rem;
    }
    
    .contact-link {
        color: #8396ff;
        text-decoration: none;
        font-weight: 500;
        border-bottom: 1px solid transparent;
        transition: border-color 0.2s ease;
    }
    
    .contact-link:hover {
        border-bottom-color: #8396ff;
    }
    
    .email {
        background: white;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 1rem;
    }
    
    .section {
        margin-bottom: 3rem;
    }

    .left-panel {
        width: 50%;
        float: left;
        padding: 40px;
        box-sizing: border-box;
    }

    .bottom-right-panel {
        width: 50%;
        float: right;
        padding: 40px;
        box-sizing: border-box;
        height: 500px;
    }

    .lift-panel {
        width: 50%;
        float: left;
        padding: 0px 40px;
        box-sizing: border-box;
    }
    

    .mountain-visual {
        position: relative;
        width: 100%;
        margin: 0 auto;
        display: flex;
        align-items: center;
        height: 300px;
    }


    .mountain-png {
        width: 50%;
        height: 200px;
        display: block;
        position: absolute;
        right: 0;
    }

    .elevation-marker {
        position: absolute;
        left: 10%;
        background-color: white;
        padding: 4px 8px;
        font-weight: 300;
        font-size: 1.2rem;
        white-space: nowrap;
    }

    .vertical-marker {
        left: 10%;
        top: 39%;
    }

    .peak-marker {
        top: 9%;
    }

    .base-marker {
        bottom: 13%;
    }

    .horizontal-line {
        position: absolute;
        left: 10%;
        height: 2px;
        background-color: #ccc;
    }

    .peak-line {
        top: 17%;
        width: 58%
    }

    .base-line {
        bottom: 17%;
        width: 38%;
    }

    .info-row {
        display: flex;
        justify-content: space-between; /* space between the 3 sections */
        gap: 40px; /* optional: control spacing */
        align-items: center;
        margin: 20px auto 0 auto;
        width: 80%;
    }

    .snowfall-section {
        text-align: center;
    }

    .info-container {
        display: flex;
    }

    .snowfall-visual {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
    }

    .snowfall-amount {
            font-size: 3rem;
            font-weight: 300;
            color: #2c3e50;
            margin-top: 8px;
    }

    .lift-amount {
            font-size: 3rem;
            font-weight: 300;
            color: #2c3e50;
            margin-bottom: 10px;
            line-height: 1;
    }

    .snowfall-label {
            font-size: 1rem;
            color: #7f8c8d;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-align: center;
    }

    .icon {
        font-size: 5rem;
        margin-right: 25px;
        vertical-align: middle;
    }

    .detail-section {
        margin-bottom: 30px;
    }

    .detail-label {
        font-size: 0.95rem;
        color: #7f8c8d;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 6px;
    }

    .detail-value {
        font-size: 1.5rem;
        font-weight: 300;
        color: #2c3e50;
    }

    .right-panel {
        margin-top: 40px;
        background: #f8f9fa;
        width: 40%;
        right: 3%;
        padding: 10px;
        border: 1px solid #eee;
        border-radius: 8px;
        position: relative;
        height: 250px; /* üëà sets consistent height */
        cursor: pointer;
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .right-panel:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    .trail-map-preview {
        width: 100%;
        height: 100%;
        object-fit: cover; /* üëà auto-crops the image while preserving aspect ratio */
        display: block;
        border-radius: 8px;
    }

    .trail-map-overlay {
        position: absolute;
        bottom: 230px;
        left: 28%;
        background: #f8f9fa;
        color: #222;
        font-size: 1.2rem;
        font-weight: 200;
        padding: 6px 14px;
        border-radius: 8px;
        pointer-events: none; /* so clicking still triggers openTrailMap */
    }


    /* Modal for fullscreen image */
    .trailmap-modal {
        display: none;
        position: fixed;
        z-index: 999;
        padding-top: 40px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.75);
    }

    .trailmap-full {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 1000px;
        border-radius: 8px;
        box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    .close-btn {
        position: absolute;
        top: 25px;
        right: 45px;
        color: white;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
    }

    .close-btn:hover {
        color: #ddd;
    }


    .content-container {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 20px;
    }

    .right-panel p:last-child,
    .right-panel h1:last-child,
    .right-panel div:last-child {
        margin-bottom: 0;
    }

    .lift-list {
        margin: 20px auto 0 auto;
        max-width: 300px;


        background: white;
        padding: 20px;
    }

    .lift-row {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        font-size: 1.05rem;
        border-bottom: 1px solid #eee;
    }

    .lift-label {
        color: #555;
    }

    .lift-value {
        font-weight: 500;
        color: #2c3e50;
    }


    .map-box {
        background: white;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 10px;
        height: 100%;
    }

    .bottom-right-panel iframe {
        width: 100%;
        height: 500px;
        border: none;
        border-radius: 8px;
    }

    .lift-map-panels {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        align-items: center; /* ensures equal height if needed */
        margin-top: 40px;
    }

</style>

<body>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-73V9WK31KR"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-73V9WK31KR');
    </script>
    
    <div class="resort-hero">
        <img src="{{ url_for('static', filename='resort_pictures/' ~ resort.name ~ '.jpg') }}" 
             alt="{{ resort.name }} photo">
        
        
    </div>
    <div class="resort-overlay">
        <h1>{{ resort.name }}</h1>
        <p class="state">{{ resort.state }}</p>
    </div>
      

    <div class="content-container">
    <div class="left-panel">
        <div class="mountain-visual">

            <!-- Horizontal lines -->
          <div class="horizontal-line peak-line"></div>
          <div class="horizontal-line base-line"></div>
      
          <!-- Elevation markers -->
          <div class="elevation-marker peak-marker">Summit: {{ resort.peak_elevation_ft }} ft</div>
          <div class="elevation-marker vertical-marker">Vertical: {{ resort.vertical_drop_ft }} ft&nbsp;&nbsp;<span style="font-size: 2rem; vertical-align: middle;">‚≠•</span></div>
          <div class="elevation-marker base-marker">Base: {{ resort.base_elevation_ft }} ft</div>
    
          <img src="{{ url_for('static', filename='images/mountain.png') }}" alt="Mountain" class="mountain-png">
    
        </div>
    </div>

    <script>
        function openTrailMap(url) {
            const modal = document.getElementById("trailMapModal");
            const img = document.getElementById("trailMapFull");
            img.src = url;
            modal.style.display = "block";
        }
        
        function closeTrailMap() {
            document.getElementById("trailMapModal").style.display = "none";
        }
    </script>
        

    <div class='right-panel' onclick='openTrailMap("{{ url_for("static", filename="resort_maps/" ~ resort.name ~ "_map.jpg") }}")'>
        <img src="{{ url_for('static', filename='resort_maps/' ~ resort.name ~ '_map.jpg') }}" alt="Trail Map" class="trail-map-preview">
        <div class="trail-map-overlay">Trail Map (click to expand)</div>
    </div>
    
    <!-- Fullscreen modal -->
    <div id="trailMapModal" class="trailmap-modal" onclick="closeTrailMap()">
        <span class="close-btn">&times;</span>
        <img id="trailMapFull" class="trailmap-full">
    </div>
    

    </div>
    

    <div class="info-row">
        <div class="info-container">
            <div class="icon">‚ùÑÔ∏é</div>
            <div class="snowfall-section">
                <div class="snowfall-amount">{{ resort.annual_snowfall }}"</div>
                <div class="snowfall-label">Annual Snowfall</div>
            </div>
        </div>
        <div class="info-container">
            <div class="icon">‚õ∂</div>
            <div class="snowfall-section">
                <div class="snowfall-amount">{{ resort.skiable_acres }} ac</div>
                <div class="snowfall-label">Skiable Acres</div>
            </div>
        </div>
        <div class="info-container">
            <div class="icon">‚≠§</div>
            <div class="snowfall-section">
                <div class="snowfall-amount">{{ resort.slope_mi }} mi</div>
                <div class="snowfall-label">Slope Length</div>
            </div>
        </div>
    </div>

    <hr style="margin: 40px 0; border: none; border-top: 1px solid #ddd;">

    <div class="lift-map-panels">

        <div class="lift-panel">
            <div class="snowfall-section">
                <div class="lift-amount">{{ resort.total_lifts }}</div>
                <div class="snowfall-label">Total Lifts</div>
            </div>
        
            <div class="lift-list">
                {% for label, value in [
                    ('Tram', resort.Tram),
                    ('Gondola', resort.Gondola),
                    ('Pulse Gondola', resort['Pulse Gondola']),
                    ('Cabriolet', resort.Cabriolet),
                    ('8-Pack', resort['8-pack']),
                    ('6-Pack', resort['6-pack']),
                    ('Chondola', resort.Chondola),
                    ('High-Speed Quad', resort['Detach Quad']),
                    ('Fixed Quad', resort['Fixed Quad']),
                    ('Triple', resort.Triple),
                    ('High-Speed Triple', resort['Detach Triple']),
                    ('Double', resort.Double),
                    ('Single', resort.Single),
                    ('T-Bar', resort['T-Bar']),
                    ('J-Bar', resort['J-Bar']),
                    ('Poma/Platter', resort['Poma/platter']),
                    ('Ropetow', resort.Ropetow),
                    ('Carpet', resort.Carpet)
                ] %}
                    {% if value > 0 %}
                        <div class="lift-row">
                            <span class="lift-label">{{ label }}</span>
                            <span class="lift-value">{{ value }}</span>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    
        <div class="bottom-right-panel map-box">
            {{ map_html|safe }}
        </div>  


    </div>

    <div class="right-panel">

        <div class="detail-section">
            <div class="detail-value" style="text-align: center;">{{ resort.owner }}</div>
            <div class="snowfall-label">Owner</div>
        </div>

        <div class="detail-section">
            <div class="snowfall-amount" style="text-align: center;">${{ resort.price }}</div>
            <div class="snowfall-label">2024‚Äì2025 Peak Ticket Price</div>
        </div>
    
    </div>
  

</body>


{% endblock %}